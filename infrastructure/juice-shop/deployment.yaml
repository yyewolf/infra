apiVersion: apps/v1
kind: Deployment
metadata:
  name: juice-shop
spec:
  replicas: 1
  selector:
    matchLabels:
      app: juice-shop
  template:
    metadata:
      annotations:
        io.kubernetes.cri-o.userns-mode: "auto:size=65536"
      labels:
        app: juice-shop
    spec:
      automountServiceAccountToken: false
      runtimeClassName: sysbox-runc
      containers:
        - image: mirror.gcr.io/bkimminich/juice-shop@sha256:89337a9b216106f276ecc9875800c4c9c47b9d89b8a785b1111d5c94a0fed5c2
          imagePullPolicy: IfNotPresent
          name: juice-shop
          resources:
            requests:
              cpu: 0m
              memory: 0Mi
            limits:
              cpu: 300m
              memory: 400Mi
          readinessProbe:
            httpGet:
              path: /
              port: 3000
            initialDelaySeconds: 10
            periodSeconds: 5
